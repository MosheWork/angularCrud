<div class="dialog-wrapper" dir="rtl">

  <h2 mat-dialog-title>{{ isEdit ? 'ערוך שאילתא' : 'הוסף שאילתא' }}</h2>

  <mat-dialog-content>
    <form [formGroup]="form" class="dialog-form" (ngSubmit)="save()">

      <mat-form-field appearance="fill" class="full-width">
        <mat-label>שם השאילתא</mat-label>
        <input matInput formControlName="QueryName">
      </mat-form-field>

      <mat-form-field appearance="fill" class="full-width">
        <mat-label>SQL קוד</mat-label>
        <textarea matInput formControlName="QueryText" rows="6"></textarea>
      </mat-form-field>

      <mat-form-field appearance="fill" class="full-width">
        <mat-label>תיאור</mat-label>
        <textarea matInput formControlName="Description" rows="2"></textarea>
      </mat-form-field>

      <mat-form-field appearance="fill" class="full-width">
        <mat-label>נושא</mat-label>
        <input matInput formControlName="Subject">
      </mat-form-field>

      <mat-form-field appearance="fill" class="full-width">
        <mat-label>נושא משנה</mat-label>
        <input matInput formControlName="SubSubject">
      </mat-form-field>

      <!-- CREATED FOR AUTOCOMPLETE -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>נוצר עבור</mat-label>

        <input matInput
              [formControl]="createdForControl"
              [matAutocomplete]="autoFor"
              autocomplete="off">

        <mat-autocomplete #autoFor="matAutocomplete"
                          [displayWith]="displayEmployee"
                          (optionSelected)="onSelectCreatedFor($event.option.value)">
          <mat-option *ngFor="let emp of filteredCreatedFor" [value]="emp">
            {{ displayEmployee(emp) }}
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>

      <!-- CREATED BY AUTOCOMPLETE -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>נוצר על ידי</mat-label>

        <input matInput
              [formControl]="createdByControl"
              [matAutocomplete]="autoBy"
              autocomplete="off">

        <mat-autocomplete #autoBy="matAutocomplete"
                          [displayWith]="displayEmployee"
                          (optionSelected)="onSelectCreatedBy($event.option.value)">
          <mat-option *ngFor="let emp of filteredCreatedBy" [value]="emp">
            {{ displayEmployee(emp) }}
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>

      <mat-checkbox formControlName="IsActive">פעילה</mat-checkbox>

      <div class="form-actions">
        <button mat-flat-button color="primary" type="submit">שמירה</button>
        <button mat-flat-button type="button" (click)="cancel()">ביטול</button>
      </div>

    </form>
  </mat-dialog-content>

</div>
