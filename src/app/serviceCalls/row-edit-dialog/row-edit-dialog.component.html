<h2 mat-dialog-title class="custom-dialog-title">
  <div class="user-info">
    <span class="callback-phone">{{ data.rowData.callbackPhone }}<mat-icon matPrefix>phone</mat-icon>
    </span>
    <span class="user-name">שם פרטי+משפחה</span>
    <span class="user-requested">שם משתמש: {{ data.rowData.userRequested }}</span>
  </div>
</h2>
<mat-dialog-content [formGroup]="form" dir="rtl">
  <!-- Part 1: General Information -->
  <div class="section">
    <h3 class="section-title">מידע כללי <mat-icon>info</mat-icon>
    </h3>
    
    <div class="section-content">
      <div class="grid-cell">
        <mat-form-field appearance="fill" class="full-width-input">
          <mat-label>מספר קריאה</mat-label>
          <input matInput [value]="data?.rowData?.serviceCallID" disabled />
        </mat-form-field>
      </div>
      <div class="grid-cell">
        <mat-form-field appearance="fill" class="full-width-input">
          <mat-label>עדיפות</mat-label>
          <input matInput formControlName="priority" />
        </mat-form-field>
      </div>
      <div class="grid-cell">
        <mat-form-field appearance="fill" class="full-width-input">
          <mat-label>זמן בקשה</mat-label>
          <input matInput [value]="data?.rowData?.timeOpened" disabled />
        </mat-form-field>
      </div>
      <!-- Time Closed (Read-only, not part of form group) -->
      <div class="grid-cell">
        <mat-form-field appearance="fill" class="full-width-input">
          <mat-label>שעת סגירה </mat-label>
          <input matInput [value]="data?.rowData?.timeClosed" disabled />
        </mat-form-field>
      </div>
      <mat-form-field appearance="fill" class="full-width-input">
        <mat-label>צוות מטפל</mat-label>
        <mat-select formControlName="teamInCharge">
          <mat-option *ngFor="let team of teams" [value]="team">{{ team.name }}</mat-option>
        </mat-select>
      </mat-form-field>
<mat-form-field appearance="fill" class="full-width-input">
  <mat-label>User In Charge</mat-label>
  <mat-select formControlName="userInCharge">
    <mat-option *ngFor="let user of users" [value]="user.employeeID">{{ user.firstName }} {{ user.lastName }}</mat-option>
  </mat-select>
</mat-form-field>

      <div class="grid-cell">
        <mat-form-field appearance="fill" class="full-width-input">
          <mat-label>קטגוריה ראשית</mat-label>
          <mat-select formControlName="category2">
            <mat-option *ngFor="let category of filteredCategories" [value]="category">{{ category.categoryName }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>
  </div>

  <!-- Part 2: -->
  <div class="section">
    <h3 class="section-title">פרטי התקלה <mat-icon>computer</mat-icon></h3>
    <div class="section-content">
      <div class="grid-cell">
        <mat-form-field appearance="fill" class="full-width-input">
          <mat-label>כותרת</mat-label>
          <input matInput formControlName="title" />
        </mat-form-field>
      </div>
      <div class="grid-cell">
        <mat-form-field appearance="fill" class="full-width-input">
          <mat-label>IP</mat-label>
          <input matInput formControlName="serviceCallID" />
        </mat-form-field>
      </div>
      <div class="grid-cell textarea-cell">
        <mat-form-field appearance="fill" class="full-width-input">
          <mat-label>תיאור הבעיה </mat-label>
          <textarea matInput formControlName="problemDescription"></textarea>
        </mat-form-field>
      </div>
    </div>
  </div>
  <div class="section">
    <h3 class="section-title">טיפול בתקלה <mat-icon> border_color</mat-icon>
    </h3>
    <div class="section-content">
      <div class="grid-cell textarea-cell">
        <mat-form-field appearance="fill" class="full-width-input">
          <mat-label>פתרון</mat-label>
          <textarea matInput formControlName="solutionText"></textarea>
        </mat-form-field>
      </div>
      <div class="grid-cell textarea-cell">
        <mat-form-field appearance="fill" class="full-width-input">
          <mat-label>הערות</mat-label>
          <textarea matInput formControlName="comments"></textarea>
        </mat-form-field>
      </div>
      <!-- Status Dropdown -->
      <div class="grid-cell">
        <mat-form-field appearance="fill" class="full-width-input">
          <mat-label>סטטוס</mat-label>
          <mat-select formControlName="status">
            <mat-option *ngFor="let status of statuses" [value]="status.statusName">{{ status.statusName }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>
  </div>
</mat-dialog-content>
<mat-dialog-actions class="dialog-actions">
  <button mat-flat-button color="primary" (click)="save()">שמור שינויים</button>
  <button mat-flat-button color="warn" (click)="closeDialog()">בטל</button>

</mat-dialog-actions>
