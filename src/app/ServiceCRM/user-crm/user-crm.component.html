<app-spinner [isLoading]="isLoading"></app-spinner>

<mat-card  *ngIf="!isLoading" class="crm-container">
    <mat-card-title>ניהול משתמשים (CRM)</mat-card-title>

    <!-- CRM Image Card -->
    <mat-card class="crm-card">
      
         
        <img src="assets/crm-data-entry-services.jpg" alt="CRM Data Entry Services">
      </mat-card>
    <!-- <div class="filter-section">
      <mat-form-field appearance="outline">
        <mat-label>חפש...</mat-label>
        <input matInput (keyup)="applyFilter($event)" placeholder="הזן ערך לחיפוש">
      </mat-form-field>
    </div> -->
    <mat-form-field class="long-search-bar" style="flex: 1; margin-right: 10px;">
        <mat-label class="filters" style="color: blue">חיפוש</mat-label>
        <input matInput (keyup)="applyFilter($event)" class="search-input" />
      </mat-form-field>

  
    <div class="table-container">
      <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">

        <!-- AdmissionNo -->
        <ng-container matColumnDef="AdmissionNo">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>מספר אשפוז</th>
          <td mat-cell *matCellDef="let row">{{ row.AdmissionNo }}</td>
        </ng-container>
    
        <!-- UnitName -->
        <ng-container matColumnDef="UnitName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>מחלקה</th>
          <td mat-cell *matCellDef="let row">{{ row.UnitName }}</td>
        </ng-container>
    
        <!-- AdmissionDate -->
        <ng-container matColumnDef="AdmissionDate">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>תאריך קבלה</th>
          <td mat-cell *matCellDef="let row">{{ row.AdmissionDate | date: 'dd/MM/yyyy HH:mm' }}</td>
        </ng-container>
    
        <!-- FirstName -->
        <ng-container matColumnDef="FirstName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>שם פרטי</th>
          <td mat-cell *matCellDef="let row">{{ row.FirstName }}</td>
        </ng-container>
    
        <!-- LastName -->
        <ng-container matColumnDef="LastName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>שם משפחה</th>
          <td mat-cell *matCellDef="let row">{{ row.LastName }}</td>
        </ng-container>
    
        <!-- Phone -->
        <ng-container matColumnDef="Phone">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>טלפון</th>
          <td mat-cell *matCellDef="let row">{{ row.Phone }}</td>
        </ng-container>
    
        <!-- PhoneCell -->
        <ng-container matColumnDef="PhoneCell">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>נייד</th>
          <td mat-cell *matCellDef="let row">{{ row.PhoneCell }}</td>
        </ng-container>
    
        <!-- AgeFormatted -->
        <ng-container matColumnDef="AgeFormatted">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>גיל</th>
          <td mat-cell *matCellDef="let row">{{ row.AgeFormatted }}</td>
        </ng-container>
    
        <!-- BirthDateFormatted -->
        <ng-container matColumnDef="BirthDateFormatted">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>תאריך לידה</th>
          <td mat-cell *matCellDef="let row">{{ row.BirthDateFormatted }}</td>
        </ng-container>
    
        <!-- IsBirthdayToday -->
        <ng-container matColumnDef="IsBirthdayToday">
          <th mat-header-cell *matHeaderCellDef>יום הולדת היום?</th>
          <td mat-cell *matCellDef="let row">
            <span [ngClass]="row.IsBirthdayToday ? 'birthday-yes' : 'birthday-no'">
              {{ row.IsBirthdayToday ? 'כן' : 'לא' }}
            </span>
          </td>
        </ng-container>
    
        <!-- CallStatus -->
        <ng-container matColumnDef="CallStatus">
          <th mat-header-cell *matHeaderCellDef>סטטוס שיחה</th>
          <td mat-cell *matCellDef="let row">{{ row.CallStatus }}</td>
        </ng-container>
    
        <!-- Catagory -->
        <ng-container matColumnDef="Catagory">
          <th mat-header-cell *matHeaderCellDef>קטגוריה</th>
          <td mat-cell *matCellDef="let row">{{ row.Catagory }}</td>
        </ng-container>
    
        <!-- FreeText -->
        <ng-container matColumnDef="FreeText">
          <th mat-header-cell *matHeaderCellDef>הערות</th>
          <td mat-cell *matCellDef="let row">{{ row.FreeText }}</td>
        </ng-container>
    
        <!-- BirthDayToggle -->
        <ng-container matColumnDef="BirthDayToggle">
          <th mat-header-cell *matHeaderCellDef>תזכורת יומולדת</th>
          <td mat-cell *matCellDef="let row">{{ row.BirthDayToggle }}</td>
        </ng-container>
    
        <!-- Header & Row Declarations -->
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    
      <mat-paginator [pageSizeOptions]="[5, 25, 50]" showFirstLastButtons></mat-paginator>
    </div>
  
</mat-card>
  