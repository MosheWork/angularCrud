<!-- <app-spinner [isLoading]="isLoading"></app-spinner> -->

<div   class="body">
  <!-- Title Section -->
  <div class="nine">
    <h1>
      {{ titleUnit }}<span>{{ Title1 }}{{ Title2 }}{{ NullReleaseDateCount }}   מאושפזי עבר   {{ NonNullReleaseDateCount }}</span>

    </h1>
    <div class="shared-container">
    <div class="filter-card-container">
        <div class="filter-card">
          <div dir="rtl" class="card mat-elevation-z8">
            <div dir="rtl" class="card-body">
              <div class="filter-container">
                <!-- Source Filter -->
            <!-- Toggle Group -->
<mat-button-toggle-group
name="globalSourceTableFilter"
[(ngModel)]="tempGlobalSourceTableFilter"
(change)="onSourceFilterChange($event.value)"
class="custom-toggle-group"
>
<mat-button-toggle value="All">הכל</mat-button-toggle>
<mat-button-toggle value="מאושפזים">מאושפזים</mat-button-toggle>
</mat-button-toggle-group>

              
                <!-- Date Filters -->
                <mat-form-field class="filter-field">
                  <mat-label>Start Date</mat-label>
                  <input
                    matInput
                    [matDatepicker]="startDatePicker"
                    [(ngModel)]="globalDateFilter.start"
                  />
                  <mat-datepicker-toggle matSuffix [for]="startDatePicker"></mat-datepicker-toggle>
                  <mat-datepicker #startDatePicker></mat-datepicker>
                </mat-form-field>
                
                <mat-form-field class="filter-field">
                  <mat-label>End Date</mat-label>
                  <input
                    matInput
                    [matDatepicker]="endDatePicker"
                    [(ngModel)]="globalDateFilter.end"
                  />
                  <mat-datepicker-toggle matSuffix [for]="endDatePicker"></mat-datepicker-toggle>
                  <mat-datepicker #endDatePicker></mat-datepicker>
                </mat-form-field>
              
      
              <!-- Filter Buttons -->
<div class="filter-buttons" style="margin-top: 10px; text-align: right;">
  <button mat-raised-button color="primary" (click)="applyFilters()" >
    התחל סינון
  </button>
  <button mat-raised-button color="warn" (click)="resetFilters()">
    אפס סינון
  </button>
  <mat-form-field  class="filter-field">
    <mat-label>סנן לפי מחלקות</mat-label>
    <mat-select [(value)]="selectedDepartments" multiple (selectionChange)="applyGlobalSourceTableFilter()">
      <mat-option *ngFor="let dept of departments" [value]="dept">{{ dept }}</mat-option>
    </mat-select>
  </mat-form-field>
</div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      
      
      

  <!-- <button (click)="toggleDarkMode()">
            {{ isDarkMode ? 'Disable Dark Mode' : 'Enable Dark Mode' }}
          </button>          -->

  <!-- Gauges Section -->
  <div class="gauge-section">
    <div class="gauge-row">
      <!-- Total Percentage Card -->
      <!-- <mat-card class="gauge-card">
        <div class="gauge-title">הומגלובין</div>
        <div class="gauge-content">
          <ngx-gauge
            [value]="HemoglobinAbove8Percentage"
            [min]="0"
            [max]="100"
            [label]=""
            [append]="'%'"
            [foregroundColor]="'#00a65a'"
          ></ngx-gauge>
          <div class="gauge-info">
            סה"כ מטופלים : <strong>{{ HemoglobinAbove8Count }}</strong>
          </div>
        </div>
      </mat-card> -->
<!-- Gauge for ICD9 WITH Diabetic Estimation -->
<mat-card class="gauge-card">
  <div class="gauge-title">
   ביצוע אומדן כף רגל סוכרתית     <span
      matTooltip="מונה: מטופלים עם אבחנת ICD9 שיש להם גם אומדן סוכרת | מכנה: סך מטופלים עם אבחנת סכרת ב-ICD9"
      matTooltipPosition="above"
      style="cursor: pointer; font-size: 16px; margin-left: 5px;"
    >
      <mat-icon style="color: #007BFF;">help_outline</mat-icon>
    </span>
  </div>

  <div class="gauge-content">
    <ngx-gauge
      [value]="icd9WithEstimationPercentage"
      [min]="0"
      [max]="100"
      [label]="''"
      [append]="'%'"
      [foregroundColor]="'#9b59b6'">
    </ngx-gauge>
    <div class="gauge-info">
      סה"כ מטופלים: <strong>{{ PatientWithICD9AndHaveDiabetesEstimationDataSource.data.length }}</strong>
      מתוך <strong>{{ DiagnosisICD9dataSource.data.length }}</strong>
    </div>
  </div>
</mat-card>
<mat-card class="gauge-card">
  <div class="gauge-title">
   אי ביצוע אומדן כף רגל סוכרתית    <span
    matTooltip="מונה: מטופלים עם אבחנת ICD9 אך ללא אומדן סוכרת | מכנה: סך מטופלים עם אבחנת סכרת ב-ICD9"
    matTooltipPosition="above"
    style="cursor: pointer; font-size: 16px; margin-left: 5px;"
  >
    <mat-icon style="color: #007BFF;">help_outline</mat-icon>
  </span>
  </div>

  <div class="gauge-content">
    <ngx-gauge
      [value]="icd9WithoutEstimationPercentage"
      [min]="0"
      [max]="100"
      [label]="''"
      [append]="'%'"
      [foregroundColor]="'#3498db'">
    </ngx-gauge>
    <div class="gauge-info">
    
      סה"כ מטופלים: <strong>{{ PatientWithICD9AndDontHaveDiabetesEstimationDataSource.data.length }}</strong>
      מתוך <strong>{{ DiagnosisICD9dataSource.data.length }}</strong>
    </div>
  </div>
  
</mat-card>
<!-- <--Gauge for סוכר 70 וחולה סוכרת --> 
  <mat-card class="gauge-card">
    <div class="gauge-title">	היפוגליקמיה במאושפזים עם סוכרת </div>
    <div class="gauge-content">
      <ngx-gauge
        [value]="sugar70DiabetesPercentage"
        [min]="0"
        [max]="100"
        [label]=""
        [append]="'%'"
        [foregroundColor]="'#3498db'"
      ></ngx-gauge>
      <div class="gauge-info">
        סה"כ מטופלים: <strong>{{ dataSourceBelow70.data.length }}</strong>
        מתוך <strong>{{ sugerAbove180.data.length}}</strong>
      </div>
    </div>
  </mat-card>
  <mat-card class="gauge-card">
    <div class="gauge-title">סוכר מעל 180 שלא קיבלו אינסולין </div>
    <div class="gauge-content">
      <ngx-gauge
        [value]="labResultsWithoutInsulinPercentage"
        [min]="0"
        [max]="100"
        [label]=""
        [append]="'%'"
        [foregroundColor]="'#f39c12'">
      </ngx-gauge>
      <div class="gauge-info">
        סה"כ מטופלים: <strong>{{ LabResultsWithoutInsulinDataSource.data.length }}</strong>
        מתוך <strong>{{ sugerAbove180.data.length }}</strong>
      </div>
    </div>
  </mat-card>
  <mat-card class="gauge-card">
    <div class="gauge-title">מקבלי אינסולין  </div>
    <div class="gauge-content">
      <ngx-gauge
        [value]="insulinPercentage"
        [min]="0"
        [max]="100"
        [label]=""
        [append]="'%'"
        [foregroundColor]="'#00c0ef'"
      ></ngx-gauge>
      <div class="gauge-info">
        סה"כ מטופלים: <strong>{{ InsulinDataSource.data.length }}</strong>
        מתוך <strong>{{ sugerAbove180.data.length }}</strong>
      </div>
    </div>
  </mat-card>
      <!-- ICD9 Percentage Card -->
     
      <!-- Insulin Percentage Card -->
   
      
      <!-- Lab Results Over 180 Percentage Card -->
  
<!-- <mat-card class="gauge-card">
  <div class="gauge-title">בדיקות מעבדה</div>
  <div class="gauge-content">
    <ngx-gauge
      [value]="labResultsPercentage"
      [min]="0"
      [max]="100"
      [label]="''"
      [append]="'%'"
      [foregroundColor]="'#dd4b39'"
    ></ngx-gauge>
    <div class="gauge-info">
      סה"כ מטופלים: <strong>{{ sugerAbove180.data.length }}</strong>
      מתוך <strong>{{ globalSourceTableFilter === 'מאושפזים' ? NullReleaseDateCount : NonNullReleaseDateCount }}</strong>
    </div>
  </div>
</mat-card> -->

<!-- Below 70 Gauge -->
<!-- <mat-card class="gauge-card">
  <div class="gauge-title">סוכר מתחת ל-70</div>
  <div class="gauge-content">
    <ngx-gauge
      [value]="below70Percentage"
      [min]="0"
      [max]="100"
      [label]="''"
      [append]="'%'"
      [foregroundColor]="'#00a65a'"
    ></ngx-gauge>
    <div class="gauge-info">
      סה"כ מטופלים: <strong>{{ dataSourceBelow70.data.length }}</strong>
      מתוך <strong>{{ globalSourceTableFilter === 'מאושפזים' ? NullReleaseDateCount : NonNullReleaseDateCount }}</strong>
    </div>
  </div>
</mat-card> -->

      <!-- Gauge for סוכר 180 ת -->
<mat-card class="gauge-card">
  <div class="gauge-title">היפרגליקמיה במאושפזים עם סוכרת   
    <span 
          matTooltip="    מונה: סך מטופלים עם סכרת מעל 180 | מכנה: כלל המטופלים – מטופלים עם אבחנהב "
 
          matTooltipPosition="above"
          style="cursor: pointer; font-size: 16px; margin-left: 5px;"
        >
        <mat-icon style="color: #007BFF;">help_outline</mat-icon>

        </span>
  </div>
  
  <div class="gauge-content">
    <ngx-gauge
    [value]="sugar180AllPercentage"
    [min]="0"
    [max]="100"
    [label]="''"
    [append]="'%'"
    [foregroundColor]="'#e74c3c'">
  </ngx-gauge>
  <div class="gauge-info">
    סה"כ מטופלים:<strong>{{ sugerAbove180.data.length }}</strong> 
    מתוך <strong>{{ globalSourceTableFilter === 'מאושפזים' ? NullReleaseDateCount : NonNullReleaseDateCount }} </strong>
  </div>
  </div>
</mat-card>


<mat-card class="gauge-card">
  <div class="gauge-title"> אחוז מטופלים עם סוכרת  <span 
    matTooltip="מונה: סך מטופלים עם סכרת על פי קוד | מכנה: סך מטופלים"

    matTooltipPosition="above"
    style="cursor: pointer; font-size: 16px; margin-left: 5px;"
  >
  <mat-icon style="color: #007BFF;">help_outline</mat-icon>

  </span></div>
  <div class="gauge-content">
    <ngx-gauge
      [value]="Icd9Percentage"
      [min]="0"
      [max]="100"
      [label]=""
      [append]="'%'"
      [foregroundColor]="'#f39c12'"
    ></ngx-gauge>
    <div class="gauge-info">
      סה"כ מטופלים : <strong> {{ DiagnosisICD9dataSource.data.length }} </strong> מתוך
      <strong>{{ globalSourceTableFilter === 'מאושפזים' ? NullReleaseDateCount : NonNullReleaseDateCount }}</strong>
    </div>
  </div>
</mat-card>
      
      <!-- ייעוצים -->
    </div>
  </div>

  <!-- Table Section -->
  <div class="table-section">
  <div
    class="mat-table-container"
    dir="rtl"
    style="overflow-x: hidden; overflow-y: hidden; display: inline-grid"
  >
    <mat-tab-group >
   
      <mat-tab label="">
        <ng-template mat-tab-label>
          <span matTooltip=" מטופלים עם אבחנה ICD9  " matTooltipPosition="above">
            מטופלים עם אבחנה ICD9
          </span>
        </ng-template>
        <table mat-table [dataSource]="DiagnosisICD9dataSource" class="mat-elevation-z8" matSort #sort4="matSort" style="table-layout: fixed; width: 100%">

        
          <ng-container matColumnDef="Admission_No">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              Admission No
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.Admission_No }}
            </td>
          </ng-container>
          <ng-container matColumnDef="Admission_Date">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              Admission Date
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.Admission_Date | date }}
            </td>
          </ng-container>
          <ng-container matColumnDef="Id_Num">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>ID Number</th>
            <td mat-cell *matCellDef="let element">{{ element.Id_Num }}</td>
          </ng-container>
          <ng-container matColumnDef="First_Name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              First Name
            </th>
            <td mat-cell *matCellDef="let element">{{ element.First_Name }}</td>
          </ng-container>
          <ng-container matColumnDef="Last_Name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Last Name</th>
            <td mat-cell *matCellDef="let element">{{ element.Last_Name }}</td>
          </ng-container>
          <ng-container matColumnDef="ICD9">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>ICD9</th>
            <td mat-cell *matCellDef="let element">{{ element.ICD9 }}</td>
          </ng-container>
          <ng-container matColumnDef="Name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
            <td mat-cell *matCellDef="let element">{{ element.Name }}</td>
          </ng-container>
          <!-- <ng-container matColumnDef="Entry_Date">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              Entry Date
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.Entry_Date | date }}
            </td>
          </ng-container> -->
          <ng-container matColumnDef="Release_Date">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Release Date</th>
            <td mat-cell *matCellDef="let element">{{ element.Release_Date | date }}</td>
          </ng-container>
          <ng-container matColumnDef="UnitName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>מחלקה </th>
            <td mat-cell *matCellDef="let element">{{ element.UnitName }}</td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="DiagnosisICD9"></tr>
          <tr mat-row *matRowDef="let row; columns: DiagnosisICD9"></tr>
        </table>
        <mat-paginator
          #paginator4
          [pageSizeOptions]="[5, 10, 20]"
          showFirstLastButtons
        ></mat-paginator>
      </mat-tab>

    
   
      
      <mat-tab class="tabtitle" label=" סוכר מעל 180" >
        <ng-template mat-tab-label>
          <span matTooltip="2 בדיקות סוכר מעל 180 תוך 48 שעות" matTooltipPosition="above">
            סוכר מעל 180
          </span>
        </ng-template>
        <table mat-table [dataSource]="sugerAbove180" class="mat-elevation-z8" matSort #sort1="matSort" style="table-layout: fixed; width: 100%">

          <ng-container matColumnDef="Admission_No">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              Admission No
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.Admission_No }}
            </td>
          </ng-container>
          <ng-container matColumnDef="Admission_Date">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              Admission Date
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.Admission_Date | date }}
            </td>
          </ng-container>
        
          <ng-container matColumnDef="First_Name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              First Name
            </th>
            <td mat-cell *matCellDef="let element">{{ element.First_Name }}</td>
          </ng-container>
          <ng-container matColumnDef="Last_Name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Last Name</th>
            <td mat-cell *matCellDef="let element">{{ element.Last_Name }}</td>
          </ng-container>
          <ng-container matColumnDef="Age_Years">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>גיל</th>
            <td mat-cell *matCellDef="let element">{{ element.Age_Years }}</td>
          </ng-container>
          <ng-container matColumnDef="Count_Above_180_Less_48h">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              Count > 180
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.Count_Above_180_Less_48h }}
            </td>
          </ng-container>
          <ng-container matColumnDef="Release_Date">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Release Date</th>
            <td mat-cell *matCellDef="let element">{{ element.Release_Date | date }}</td>
          </ng-container>
          <ng-container matColumnDef="UnitName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> מחלקה</th>
            <td mat-cell *matCellDef="let element">{{ element.UnitName }}</td>
          </ng-container>
          <ng-container matColumnDef="LastTestResult">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> בדיקה אחרונה</th>
            <td mat-cell *matCellDef="let element">{{ element.LastTestResult }}</td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="sugerAbove180Columns"></tr>

          <tr 
          mat-row 
          *matRowDef="let row; columns: sugerAbove180Columns" 
          (click)="openDialog(row)"
          style="cursor: pointer;">
        </tr>
                 
        </table>
        <mat-paginator
          #paginator1
          [pageSizeOptions]="[5, 10, 20]"
          showFirstLastButtons
        ></mat-paginator>
      </mat-tab>

      
      
 

   
   
      <mat-tab label="מעל 180 ללא אינסולין">
        <table mat-table [dataSource]="LabResultsWithoutInsulinDataSource" class="mat-elevation-z8" matSort #sortWithoutInsulin="matSort" style="table-layout: fixed; width: 100%">

          <ng-container matColumnDef="Admission_No">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>מספר אשפוז</th>
            <td mat-cell *matCellDef="let element">{{ element.Admission_No }}</td>
          </ng-container>
          <ng-container matColumnDef="Admission_Date">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>תאריך קבלה</th>
            <td mat-cell *matCellDef="let element">{{ element.Admission_Date | date }}</td>
          </ng-container>
          <ng-container matColumnDef="First_Name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>שם פרטי</th>
            <td mat-cell *matCellDef="let element">{{ element.First_Name }}</td>
          </ng-container>
          <ng-container matColumnDef="Last_Name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>שם משפחה</th>
            <td mat-cell *matCellDef="let element">{{ element.Last_Name }}</td>
          </ng-container>
          <ng-container matColumnDef="Count_Above_180_Less_48h">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>מדידות מעל 180 ב-48 שעות</th>
            <td mat-cell *matCellDef="let element">{{ element.Count_Above_180_Less_48h }}</td>
          </ng-container>
          <ng-container matColumnDef="Release_Date">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>תאריך שחרור</th>
            <td mat-cell *matCellDef="let element">{{ element.Release_Date | date }}</td>
          </ng-container>
          <ng-container matColumnDef="UnitName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>מחלקה </th>
            <td mat-cell *matCellDef="let element">{{ element.UnitName }}</td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumnsLabResultsWithoutInsulin"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumnsLabResultsWithoutInsulin;"></tr>
        </table>
      
        <mat-paginator
          #paginatorWithoutInsulin
          [pageSizeOptions]="[5, 10, 20]"
          showFirstLastButtons>
        </mat-paginator>
      </mat-tab>
      <mat-tab label="מקבל אינסולין">
        <ng-template mat-tab-label>
          <span matTooltip="   לעדכן הסבר" matTooltipPosition="above">
           אינסולין
          </span>
        </ng-template>
        <table mat-table [dataSource]="InsulinDataSource" class="mat-elevation-z8" matSort #sort3="matSort" style="table-layout: fixed; width: 100%">

          <ng-container matColumnDef="Hospitalization_Patient">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Patient</th>
            <td mat-cell *matCellDef="let element">
              {{ element.Hospitalization_Patient }}
            </td>
          </ng-container>
          <ng-container matColumnDef="Admission_No">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              Admission No
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.Admission_No }}
            </td>
          </ng-container>
          <ng-container matColumnDef="Admission_Date">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              Admission Date
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.Admission_Date | date }}
            </td>
          </ng-container>
          <ng-container matColumnDef="Id_Num">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>ID Number</th>
            <td mat-cell *matCellDef="let element">{{ element.Id_Num }}</td>
          </ng-container>
          <ng-container matColumnDef="First_Name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              First Name
            </th>
            <td mat-cell *matCellDef="let element">{{ element.First_Name }}</td>
          </ng-container>
          <ng-container matColumnDef="Last_Name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Last Name</th>
            <td mat-cell *matCellDef="let element">{{ element.Last_Name }}</td>
          </ng-container>
          <ng-container matColumnDef="Main_Drug">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Main Drug</th>
            <td mat-cell *matCellDef="let element">{{ element.Main_Drug }}</td>
          </ng-container>
          <ng-container matColumnDef="Name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Drug Name</th>
            <td mat-cell *matCellDef="let element">{{ element.Name }}</td>
          </ng-container>
          <ng-container matColumnDef="Entry_Date">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              Entry Date
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.Entry_Date | date }}
            </td>
          </ng-container>
          <ng-container matColumnDef="Release_Date">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              Release_Date
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.Release_Date | date }}
            </td>
          </ng-container>
          <ng-container matColumnDef="UnitName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>מחלקה </th>
            <td mat-cell *matCellDef="let element">{{ element.UnitName }}</td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="insulinColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: insulinColumns"></tr>
        </table>
        <mat-paginator
          #Ensoleen
          [length]="EnsoleenresultsLength"
          [pageSizeOptions]="[5, 10, 20]"
          showFirstLastButtons
        ></mat-paginator>
      </mat-tab>
      <mat-tab label="">
        <ng-template mat-tab-label>
          <span matTooltip="" matTooltipPosition="above">
            המוגלובין מסוכרר  
          </span>
        </ng-template>
        <table mat-table [dataSource]="dataSourceHemoglobin" class="mat-elevation-z8" matSort #sortHemoglobin="matSort" style="table-layout: fixed; width: 100%">

          <ng-container matColumnDef="Admission_Date">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              Admission Date
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.Admission_Date | date }}
            </td>
          </ng-container>
          <ng-container matColumnDef="TestCode">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Test Code</th>
            <td mat-cell *matCellDef="let element">{{ element.TestCode }}</td>
          </ng-container>
          <ng-container matColumnDef="TestName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Test Name</th>
            <td mat-cell *matCellDef="let element">{{ element.TestName }}</td>
          </ng-container>
          <ng-container matColumnDef="Result">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Result</th>
            <td mat-cell *matCellDef="let element">{{ element.Result }}</td>
          </ng-container>
          <ng-container matColumnDef="TestDate">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Test Date</th>
            <td mat-cell *matCellDef="let element">
              {{ element.TestDate | date }}
            </td>
          </ng-container>
          <ng-container matColumnDef="Id_Num">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>ID Number</th>
            <td mat-cell *matCellDef="let element">{{ element.Id_Num }}</td>
          </ng-container>
          <ng-container matColumnDef="First_Name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              First Name
            </th>
            <td mat-cell *matCellDef="let element">{{ element.First_Name }}</td>
          </ng-container>
          <ng-container matColumnDef="Last_Name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Last Name</th>
            <td mat-cell *matCellDef="let element">{{ element.Last_Name }}</td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumnsHemoglobin"></tr>
          <tr 
          mat-row 
          *matRowDef="let row; columns: displayedColumnsHemoglobin" 
          (click)="openDialog(row)"
          style="cursor: pointer;">
        </tr>

        </table> 
        <mat-paginator
          #paginatorHemoglobin
          [pageSizeOptions]="[5, 10, 20]"
          showFirstLastButtons
        ></mat-paginator>
      </mat-tab>
    
      <mat-tab class="tabtitle" label="סוכר מתחת ל-70">
        <ng-template mat-tab-label>
          <span matTooltip="2 בדיקות סוכר מתחת 70 תוך 48 שעות" matTooltipPosition="above">
            סוכר מתחת ל 70
          </span>
        </ng-template>
        <table mat-table [dataSource]="dataSourceBelow70" class="mat-elevation-z8" matSort #sortBelow70="matSort" style="table-layout: fixed; width: 100%">

          <ng-container matColumnDef="Admission_No">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              Admission No
            </th>
            <td mat-cell *matCellDef="let element">{{ element.Admission_No }}</td>
          </ng-container>
          <ng-container matColumnDef="Admission_Date">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              Admission Date
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.Admission_Date | date }}
            </td>
          </ng-container>
          <ng-container matColumnDef="First_Name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              First Name
            </th>
            <td mat-cell *matCellDef="let element">{{ element.First_Name }}</td>
          </ng-container>
          <ng-container matColumnDef="Age_Years">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>גיל</th>
            <td mat-cell *matCellDef="let element">{{ element.Age_Years }}</td>
          </ng-container>
          <ng-container matColumnDef="Last_Name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              Last Name
            </th>
            <td mat-cell *matCellDef="let element">{{ element.Last_Name }}</td>
          </ng-container>
          <ng-container matColumnDef="Count_Less_70_Less_48h">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              Count < 70 (48h)
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.Count_Less_70_Less_48h }}
            </td>
          </ng-container>
          <ng-container matColumnDef="Release_Date">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Release Date</th>
            <td mat-cell *matCellDef="let element">{{ element.Release_Date | date }}</td>
          </ng-container>
          <ng-container matColumnDef="UnitName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>מחלקה </th>
            <td mat-cell *matCellDef="let element">{{ element.UnitName }}</td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumnsBelow70"></tr>

          <tr 
          mat-row 
          *matRowDef="let row; columns: displayedColumnsBelow70" 
          (click)="openDialog(row)"
          style="cursor: pointer;">
        </tr>
        </table>
        <mat-paginator
          #paginatorBelow70
          [pageSizeOptions]="[5, 10, 20]"
          showFirstLastButtons
        ></mat-paginator>
      </mat-tab>
  
      <mat-tab label="ייעוצים">
        <table mat-table [dataSource]="dataSourceAllConsiliums" class="mat-elevation-z8" matSort #sortAllConsiliums="matSort" style="table-layout: fixed; width: 100%">
          <ng-container matColumnDef="Id_Num">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>ID</th>
            <td mat-cell *matCellDef="let element">{{ element.Id_Num }}</td>
          </ng-container>

          <ng-container matColumnDef="First_Name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              First Name
            </th>
            <td mat-cell *matCellDef="let element">{{ element.First_Name }}</td>
          </ng-container>

          <ng-container matColumnDef="Last_Name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Last Name</th>
            <td mat-cell *matCellDef="let element">{{ element.Last_Name }}</td>
          </ng-container>

          <ng-container matColumnDef="UnitName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Unit</th>
            <td mat-cell *matCellDef="let element">{{ element.UnitName }}</td>
          </ng-container>

          <ng-container matColumnDef="Entry_Date">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              Entry Date
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.Entry_Date | date }}
            </td>
          </ng-container>
          <ng-container matColumnDef="Question">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Question</th>
            <td mat-cell *matCellDef="let element">{{ element.Question }}</td>
          </ng-container>
          <ng-container matColumnDef="Diagnosis_Text">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              Diagnosis_Text
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.Diagnosis_Text }}
            </td>
          </ng-container>
          <ng-container matColumnDef="Consulted_Unit">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              Consulted_Unit
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.Consulted_Unit }}
            </td>
          </ng-container>
          <ng-container matColumnDef="Answer_Text">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              Answer_Text
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.Answer_Text }}
            </td>
          </ng-container>
          <ng-container matColumnDef="Answer_Date">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              Answer_Date
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.Answer_Date | date }}
            </td>
          </ng-container>
          
          <!-- Add other columns similarly -->

          <tr
            mat-header-row
            *matHeaderRowDef="displayedColumnsAllConsiliums"
          ></tr>
          <tr
            mat-row
            *matRowDef="let row; columns: displayedColumnsAllConsiliums"
          ></tr>
        </table>

        <mat-paginator
          #paginatorAllConsiliums
          [pageSizeOptions]="[5, 10, 20]"
          showFirstLastButtons
        ></mat-paginator>
      </mat-tab>
      <mat-tab label="ICD9 עם אומדן סוכרת">
        <table mat-table [dataSource]="PatientWithICD9AndHaveDiabetesEstimationDataSource" class="mat-elevation-z8"  matSort
        #sortICD9HaveEstimation="matSort" style="table-layout: fixed; width: 100%">
      
          <ng-container matColumnDef="Admission_No">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>מספר אשפוז</th>
            <td mat-cell *matCellDef="let element">{{ element.Admission_No }}</td>
          </ng-container>
      
          <ng-container matColumnDef="Admission_Date">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>תאריך קבלה</th>
            <td mat-cell *matCellDef="let element">{{ element.Admission_Date | date }}</td>
          </ng-container>
      
          <ng-container matColumnDef="First_Name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>שם פרטי</th>
            <td mat-cell *matCellDef="let element">{{ element.First_Name }}</td>
          </ng-container>
      
          <ng-container matColumnDef="Last_Name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>שם משפחה</th>
            <td mat-cell *matCellDef="let element">{{ element.Last_Name }}</td>
          </ng-container>
      
          <ng-container matColumnDef="Admission_Medical_Record">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>מספר תיק קבלה</th>
            <td mat-cell *matCellDef="let element">{{ element.Admission_Medical_Record }}</td>
          </ng-container>
      
          <ng-container matColumnDef="UnitName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>מחלקה</th>
            <td mat-cell *matCellDef="let element">{{ element.UnitName }}</td>
          </ng-container>
      
          <ng-container matColumnDef="Release_Date">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>תאריך שחרור</th>
            <td mat-cell *matCellDef="let element">{{ element.Release_Date | date }}</td>
          </ng-container>
      
          <tr mat-header-row *matHeaderRowDef="displayedColumnsPatientWithICD9AndDontHaveDiabetesEstimation"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumnsPatientWithICD9AndDontHaveDiabetesEstimation;"></tr>
        </table>
      
        <mat-paginator #paginatorICD9HaveEstimation [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
        >
      </mat-tab>
      <!-- First Tab -->
      <mat-tab label="ICD9 ללא אומדן סכרת">
        <table mat-table [dataSource]="PatientWithICD9AndDontHaveDiabetesEstimationDataSource" class="mat-elevation-z8" matSort #sortICD9NoEstimation="matSort" style="table-layout: fixed; width: 100%">

          <ng-container matColumnDef="Admission_No">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>מספר אשפוז</th>
            <td mat-cell *matCellDef="let element">{{ element.Admission_No }}</td>
          </ng-container>
          <ng-container matColumnDef="Admission_Date">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>תאריך קבלה</th>
            <td mat-cell *matCellDef="let element">{{ element.Admission_Date | date }}</td>
          </ng-container>
          <ng-container matColumnDef="First_Name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>שם פרטי</th>
            <td mat-cell *matCellDef="let element">{{ element.First_Name }}</td>
          </ng-container>
          <ng-container matColumnDef="Last_Name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>שם משפחה</th>
            <td mat-cell *matCellDef="let element">{{ element.Last_Name }}</td>
          </ng-container>
          <ng-container matColumnDef="Admission_Medical_Record">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>מספר תיק קבלה</th>
            <td mat-cell *matCellDef="let element">{{ element.Admission_Medical_Record }}</td>
          </ng-container>
          <ng-container matColumnDef="UnitName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>מחלקה</th>
            <td mat-cell *matCellDef="let element">{{ element.UnitName }}</td>
          </ng-container>
          <ng-container matColumnDef="Release_Date">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>תאריך שחרור</th>
            <td mat-cell *matCellDef="let element">{{ element.Release_Date | date }}</td>
          </ng-container>
      
          <tr mat-header-row *matHeaderRowDef="displayedColumnsPatientWithICD9AndDontHaveDiabetesEstimation"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumnsPatientWithICD9AndDontHaveDiabetesEstimation;"></tr>
        </table>
      
        <mat-paginator
          #paginatorICD9NoEstimation
          [pageSizeOptions]="[5, 10, 20]"
          showFirstLastButtons>
        </mat-paginator>
      </mat-tab>
      
      <mat-tab class="tabtitle" label="הערכת כף רגל סוכרתית">
        <ng-template mat-tab-label>
          <span matTooltip="נתוני הערכה לכף רגל סוכרתית" matTooltipPosition="above">
            הערכת כף רגל סוכרתית
          </span>
        </ng-template>
        <table mat-table [dataSource]="DiabeticFootEstimationDataSource" class="mat-elevation-z8" matSort #sortDiabeticFootEstimation="matSort" style="table-layout: fixed; width: 100%">

          <ng-container matColumnDef="Admission_No">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              Admission No
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.Admission_No }}
            </td>
          </ng-container>
          <ng-container matColumnDef="Admission_Date">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              Admission Date
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.Admission_Date | date: 'dd/MM/yyyy HH:mm' }}
            </td>
          </ng-container>
          <ng-container matColumnDef="Release_Date">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              Release Date
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.Release_Date | date: 'dd/MM/yyyy HH:mm' }}
            </td>
          </ng-container>
          <ng-container matColumnDef="Hospitalization_Patient">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              Hospitalization Patient
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.Hospitalization_Patient }}
            </td>
          </ng-container>
          <ng-container matColumnDef="Admission_Medical_Record">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              Medical Record
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.Admission_Medical_Record }}
            </td>
          </ng-container>
          <ng-container matColumnDef="Id_Num">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>ID Number</th>
            <td mat-cell *matCellDef="let element">{{ element.Id_Num }}</td>
          </ng-container>
          <ng-container matColumnDef="First_Name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>First Name</th>
            <td mat-cell *matCellDef="let element">{{ element.First_Name }}</td>
          </ng-container>
          <ng-container matColumnDef="Last_Name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Last Name</th>
            <td mat-cell *matCellDef="let element">{{ element.Last_Name }}</td>
          </ng-container>
          <ng-container matColumnDef="Grade">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Grade</th>
            <td mat-cell *matCellDef="let element">{{ element.Grade }}</td>
          </ng-container>
          <ng-container matColumnDef="UnitName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>מחלקה </th>
            <td mat-cell *matCellDef="let element">{{ element.UnitName }}</td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumnsDiabeticFootEstimation"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumnsDiabeticFootEstimation"></tr>
        </table>
        <mat-paginator
          #paginatorDiabeticFootEstimation
          [pageSizeOptions]="[5, 10, 20]"
          showFirstLastButtons
        ></mat-paginator>
      </mat-tab>
      <mat-tab label="מטופלים סוכרתיים עם קטטר ">
        <table mat-table [dataSource]="DiabeticPatientsWithCatheterOrdersDataSource" class="mat-elevation-z8" matSort #sortCatheterOrders="matSort" style="table-layout: fixed; width: 100%">
      
          <ng-container matColumnDef="Admission_No">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>מספר אשפוז</th>
            <td mat-cell *matCellDef="let element">{{ element.Admission_No }}</td>
          </ng-container>
      
          <ng-container matColumnDef="Admission_Date">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>תאריך קבלה</th>
            <td mat-cell *matCellDef="let element">{{ element.Admission_Date | date }}</td>
          </ng-container>
      
          <ng-container matColumnDef="First_Name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>שם פרטי</th>
            <td mat-cell *matCellDef="let element">{{ element.First_Name }}</td>
          </ng-container>
      
          <ng-container matColumnDef="Last_Name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>שם משפחה</th>
            <td mat-cell *matCellDef="let element">{{ element.Last_Name }}</td>
          </ng-container>
      
          <ng-container matColumnDef="ICD9">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>ICD9</th>
            <td mat-cell *matCellDef="let element">{{ element.ICD9 }}</td>
          </ng-container>
      
          <ng-container matColumnDef="DiagnosisName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>שם אבחנה</th>
            <td mat-cell *matCellDef="let element">{{ element.DiagnosisName }}</td>
          </ng-container>
      
          <!-- <ng-container matColumnDef="Entry_Date">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>תאריך אבחנה</th>
            <td mat-cell *matCellDef="let element">{{ element.Entry_Date | date }}</td>
          </ng-container> -->
      
          <ng-container matColumnDef="Parameter">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>פרמטר</th>
            <td mat-cell *matCellDef="let element">{{ element.Parameter }}</td>
          </ng-container>
      
          <ng-container matColumnDef="Release_Date">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>תאריך שחרור</th>
            <td mat-cell *matCellDef="let element">{{ element.Release_Date | date }}</td>
          </ng-container>
      
          <ng-container matColumnDef="UnitName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> מחלקה</th>
            <td mat-cell *matCellDef="let element">{{ element.UnitName }}</td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumnsDiabeticPatientsWithCatheterOrders"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumnsDiabeticPatientsWithCatheterOrders;"></tr>
        </table>
      
        <mat-paginator
          #paginatorCatheterOrders
          [pageSizeOptions]="[4, 10, 20]"
          showFirstLastButtons>
        </mat-paginator>
      </mat-tab>
      
    </mat-tab-group>
  </div>
</div>
</div>
</div>
