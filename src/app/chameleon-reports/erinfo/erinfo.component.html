<div class="body">
  <div class="nine">
    <h1>{{ titleUnit }}</h1>
  </div>

  <mat-tab-group dir="rtl">
    <!-- Admission Treatment Decision Tab -->
    <mat-tab label="סיום טיפול במלרד">
      <div dir="rtl" class="filter-form" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
        <!-- Search Field -->
        <mat-form-field style="flex-grow: 1; margin-right: 10px; width: 70%;">
          <mat-label>חיפוש</mat-label>
          <input matInput [formControl]="decisionFilter" />
        </mat-form-field>

        <!-- Icons -->
        <div class="icon-container" style="display: flex; align-items: center;">
          <!-- Excel Export -->
          <img src="../../assets/excel.png" alt="Export to Excel" (click)="exportToExcel(decisionDataSource, 'Admission_Treatment_Decision')" width="50px" style="margin-left: 10px;" />
          <!-- Reset Filters -->
          <button mat-button mat-raised-button color="primary" class="custom-button" (click)="resetFilter(decisionFilter)">
            <i class="material-icons">refresh</i>
          </button>
        </div>
      </div>

      <mat-table [dataSource]="decisionDataSource" matSort class="mat-elevation-z8">
  <ng-container *ngFor="let column of decisionColumns" [matColumnDef]="column">
    <mat-header-cell *matHeaderCellDef mat-sort-header>{{ column }}</mat-header-cell>
    <mat-cell *matCellDef="let row">
      <ng-container *ngIf="['EntryDate', 'ReleaseDate', 'ArrivalDate'].includes(column); else defaultColumn">
        {{ row[column] | date: 'dd/MM/yyyy HH:mm' }}
      </ng-container>
      <ng-template #defaultColumn>
        {{ row[column] }}
      </ng-template>
    </mat-cell>
  </ng-container>
  <mat-header-row *matHeaderRowDef="decisionColumns"></mat-header-row>
  <mat-row *matRowDef="let row; columns: decisionColumns"></mat-row>
</mat-table>
      <mat-paginator #decisionPaginator [pageSizeOptions]="[15, 50, 100]"></mat-paginator>
    </mat-tab>

    <!-- Urgency Tab -->
    <mat-tab label="רמת דחיפות">
      <div dir="rtl" class="filter-form" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
        <!-- Search Field -->
        <mat-form-field style="flex-grow: 1; margin-right: 10px; width: 70%;">
          <mat-label>חיפוש</mat-label>
          <input matInput [formControl]="urgencyFilter" />
        </mat-form-field>

        <!-- Icons -->
        <div class="icon-container" style="display: flex; align-items: center;">
          <!-- Excel Export -->
          <img src="../../assets/excel.png" alt="Export to Excel" (click)="exportToExcel(urgencyDataSource, 'Urgency')" width="50px" style="margin-left: 10px;" />
          <!-- Reset Filters -->
          <button mat-button mat-raised-button color="primary" class="custom-button" (click)="resetFilter(urgencyFilter)">
            <i class="material-icons">refresh</i>
          </button>
        </div>
      </div>

      <mat-table [dataSource]="urgencyDataSource" matSort dir="rtl" class="mat-elevation-z8">
        <ng-container *ngFor="let column of urgencyColumns" [matColumnDef]="column">
          <mat-header-cell *matHeaderCellDef mat-sort-header>{{ column }}</mat-header-cell>
          <mat-cell *matCellDef="let row">
            <ng-container *ngIf="['EntryDate', 'ReleaseDate', 'ArrivalDate'].includes(column); else defaultColumn">
              {{ row[column] | date: 'dd/MM/yyyy HH:mm' }}
            </ng-container>
            <ng-template #defaultColumn>
              {{ row[column] }}
            </ng-template>
          </mat-cell>
              </ng-container>
        <mat-header-row *matHeaderRowDef="urgencyColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: urgencyColumns"></mat-row>
      </mat-table>
      <mat-paginator #urgencyPaginator [pageSizeOptions]="[15, 50, 100]"></mat-paginator>
    </mat-tab>

    <!-- Complaint Tab -->
    <mat-tab label="סיבת פנייה">
      <div dir="rtl" class="filter-form" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
        <!-- Search Field -->
        <mat-form-field style="flex-grow: 1; margin-right: 10px; width: 70%;">
          <mat-label>חיפוש</mat-label>
          <input matInput [formControl]="complaintFilter" />
        </mat-form-field>

        <!-- Icons -->
        <div class="icon-container" style="display: flex; align-items: center;">
          <!-- Excel Export -->
          <img src="../../assets/excel.png" alt="Export to Excel" (click)="exportToExcel(complaintDataSource, 'Complaint')" width="50px" style="margin-left: 10px;" />
          <!-- Reset Filters -->
          <button mat-button mat-raised-button color="primary" class="custom-button" (click)="resetFilter(complaintFilter)">
            <i class="material-icons">refresh</i>
          </button>
        </div>
      </div>

      <mat-table [dataSource]="complaintDataSource" matSort dir="rtl" class="mat-elevation-z8">
        <ng-container *ngFor="let column of complaintColumns" [matColumnDef]="column">
          <mat-header-cell *matHeaderCellDef mat-sort-header>{{ column }}</mat-header-cell>
          <mat-cell *matCellDef="let row">
            <ng-container *ngIf="['EntryDate', 'ReleaseDate', 'ArrivalDate'].includes(column); else defaultColumn">
              {{ row[column] | date: 'dd/MM/yyyy HH:mm' }}
            </ng-container>
            <ng-template #defaultColumn>
              {{ row[column] }}
            </ng-template>
          </mat-cell>
              </ng-container>
        <mat-header-row *matHeaderRowDef="complaintColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: complaintColumns"></mat-row>
      </mat-table>
      <mat-paginator #complaintPaginator [pageSizeOptions]="[15, 50, 100]"></mat-paginator>
    </mat-tab>

    <!-- Discharge Date Tab -->
    <mat-tab label="תאריך שחרור בפועל">
      <div dir="rtl" class="filter-form" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
        <!-- Search Field -->
        <mat-form-field style="flex-grow: 1; margin-right: 10px; width: 70%;">
          <mat-label>חיפוש</mat-label>
          <input matInput [formControl]="dischargeFilter" />
        </mat-form-field>

        <!-- Icons -->
        <div class="icon-container" style="display: flex; align-items: center;">
          <!-- Excel Export -->
          <img src="../../assets/excel.png" alt="Export to Excel" (click)="exportToExcel(dischargeDataSource, 'Discharge_Date')" width="50px" style="margin-left: 10px;" />
          <!-- Reset Filters -->
          <button mat-button mat-raised-button color="primary" class="custom-button" (click)="resetFilter(dischargeFilter)">
            <i class="material-icons">refresh</i>
          </button>
        </div>
      </div>

      <mat-table [dataSource]="dischargeDataSource" matSort dir="rtl" class="mat-elevation-z8">
        <ng-container *ngFor="let column of dischargeColumns" [matColumnDef]="column">
          <mat-header-cell *matHeaderCellDef mat-sort-header>{{ column }}</mat-header-cell>
          <mat-cell *matCellDef="let row">
            <ng-container *ngIf="['EntryDate', 'ReleaseDate', 'ArrivalDate'].includes(column); else defaultColumn">
              {{ row[column] | date: 'dd/MM/yyyy HH:mm' }}
            </ng-container>
            <ng-template #defaultColumn>
              {{ row[column] }}
            </ng-template>
          </mat-cell>
              </ng-container>
        <mat-header-row *matHeaderRowDef="dischargeColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: dischargeColumns"></mat-row>
      </mat-table>
      <mat-paginator #dischargePaginator [pageSizeOptions]="[15, 50, 100]"></mat-paginator>
    </mat-tab>

    <!-- Doctor Signature Tab -->
    <mat-tab label=" חתימת רופא משחרר">
      <div dir="rtl" class="filter-form" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
        <!-- Search Field -->
        <mat-form-field style="flex-grow: 1; margin-right: 10px; width: 70%;">
          <mat-label>חיפוש</mat-label>
          <input matInput [formControl]="signatureFilter" />
        </mat-form-field>

        <!-- Icons -->
        <div class="icon-container" style="display: flex; align-items: center;">
          <!-- Excel Export -->
          <img src="../../assets/excel.png" alt="Export to Excel" (click)="exportToExcel(signatureDataSource, 'Doctor_Signature')" width="50px" style="margin-left: 10px;" />
          <!-- Reset Filters -->
          <button mat-button mat-raised-button color="primary" class="custom-button" (click)="resetFilter(signatureFilter)">
            <i class="material-icons">refresh</i>
          </button>
        </div>
      </div>

      <mat-table [dataSource]="signatureDataSource" matSort dir="rtl" class="mat-elevation-z8">
        <ng-container *ngFor="let column of signatureColumns" [matColumnDef]="column">
          <mat-header-cell *matHeaderCellDef mat-sort-header>{{ column }}</mat-header-cell>
          <mat-cell *matCellDef="let row">
            <ng-container *ngIf="['EntryDate', 'ReleaseDate', 'ArrivalDate'].includes(column); else defaultColumn">
              {{ row[column] | date: 'dd/MM/yyyy HH:mm' }}
            </ng-container>
            <ng-template #defaultColumn>
              {{ row[column] }}
            </ng-template>
          </mat-cell>
              </ng-container>
        <mat-header-row *matHeaderRowDef="signatureColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: signatureColumns"></mat-row>
      </mat-table>
      <mat-paginator #signaturePaginator [pageSizeOptions]="[15, 50, 100]"></mat-paginator>
    </mat-tab>
  </mat-tab-group>
</div>
