<form [formGroup]="guideForm" (ngSubmit)="onSubmit()">
  <div>
    <label>Title:</label>
    <input type="text" formControlName="title">
  </div>

  <div>
    <label>Created By:</label>
    <input type="text" formControlName="createdBy">
  </div>

  <div formArrayName="sections">
    <div *ngFor="let section of sections.controls; let i = index" [formGroupName]="i">
      <label>Type:</label>
      <select formControlName="type">
        <option value="Text">Text</option>
        <option value="Picture">Picture</option>
      </select>

      <!-- Position input field -->
      <div>
        <label>Position:</label>
        <input type="number" formControlName="position" min="0">
        <div *ngIf="guideForm.get('sections.' + i + '.position')?.hasError('required') && guideForm.get('sections.' + i + '.position')?.touched" class="error-message">
          Position is required.
        </div>
      </div>

      <!-- Text content input field -->
      <div *ngIf="section.get('type')?.value === 'Text'">
        <label>Text Content:</label>
        <input type="text" formControlName="textContent">
        <div *ngIf="guideForm.get('sections.' + i + '.textContent')?.hasError('required') && guideForm.get('sections.' + i + '.textContent')?.touched" class="error-message">
          Text content is required.
        </div>
      </div>

      <!-- Image file input field -->
      <div *ngIf="section.get('type')?.value === 'Picture'">
        <label>Image File:</label>
        <input type="file" (change)="onFileSelect($event, i)">
        <div *ngIf="guideForm.get('sections.' + i + '.imageFile')?.hasError('required') && guideForm.get('sections.' + i + '.imageFile')?.touched" class="error-message">
          Image file is required.
        </div>
      </div>
    </div>
  </div>

  <button type="button" (click)="addSection()">Add Section</button>
  <button type="submit">Submit Guide</button>

  <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
</form>
